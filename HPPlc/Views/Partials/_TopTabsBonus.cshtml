@inherits Umbraco.Web.Mvc.UmbracoViewPage
@{
	string AboutUsTitle = String.Empty;
	string AboutUsUrl = String.Empty;
	string PricingTabTitle = String.Empty;
	string PricingTabUrl = String.Empty;
	string ContactUsTitle = String.Empty;
	string ContactUsUrl = String.Empty;

	try
	{
		AboutUsTitle = ViewData["AboutUsTitle"]?.ToString() ?? "";
		AboutUsUrl = ViewData["AboutUsUrl"]?.ToString() ?? "";
		PricingTabTitle = ViewData["PricingTabTitle"]?.ToString() ?? "";
		PricingTabUrl = ViewData["PricingTabUrl"]?.ToString() ?? "";
		ContactUsTitle = ViewData["ContactUsTitle"]?.ToString() ?? "";
		ContactUsUrl = ViewData["ContactUsUrl"]?.ToString() ?? "";
	}
	catch { }

	var root = Umbraco?.ContentAtRoot()?.Where(x => x.ContentType.Alias == "home")?.FirstOrDefault();
	var contentMenu = root?.DescendantsOrSelf()?
						.Where(x => x.ContentType.Alias == "contentMenu").OfType<ContentMenu>().FirstOrDefault();

	string culture = HPPlc.Models.CultureName.GetCultureName();
	culture = culture == "/" ? String.Empty : culture;

	var pageName = UmbracoContext?.PublishedRequest?.PublishedContent.Name;
	bool UserLoggedInOrNot = HPPlc.Models.SessionExpireAttribute.UserLoggedIn();

	List<HPPlc.Models.GetUserCurrentSubscription> mySubscription = new List<HPPlc.Models.GetUserCurrentSubscription>();
	if (UserLoggedInOrNot == true)
	{
		mySubscription = HPPlc.Models.SessionManagement.GetCurrentSession<List<HPPlc.Models.GetUserCurrentSubscription>>(HPPlc.Models.SessionType.SubscriptionInDtls);
	}
}

@if (contentMenu != null)
{
	<input type="hidden" id="selectAge" value="@contentMenu.SelectAge" />
	<input type="hidden" id="selectWeek" value="@contentMenu.SelectWeek" />
	<input type="hidden" id="selectCategory" value="@contentMenu.SelectCategory" />
	<input type="hidden" id="reset" value="@contentMenu.ResetButton" />
}


<div class="ovrLaySkin"></div>
<div class="NavPlc">
	<div class="NavPlcin">
		<span class="clsBtn"></span>
		<ul class="navigation">
			@try
			{
				if (contentMenu != null && contentMenu.ContentItem.Any())
				{
					foreach (var menu in contentMenu?.ContentItem.Where(x => x.IsActive))
					{
						if (menu?.MyContentType != null && menu?.MyContentType?.ToLower() == "lession")// && UserLoggedInOrNot == true && (mySubscription != null && mySubscription.Any())
						{
							//Lession program
							try
							{
								var classes = root?.DescendantsOrSelf()?.Where(x => x.ContentType.Alias == "worksheetNode")?.FirstOrDefault()?.DescendantsOrSelf()?
										.Where(x => x.ContentType.Alias == "worksheetListingAgeWise")?.OfType<WorksheetListingAgeWise>();

								<li class="@menu.TitleClassName">
									<a href="@(Umbraco.Content(menu?.ContentItem?.Udi)?.DescendantsOrSelf()?.FirstOrDefault()?.Url())" onclick="commonLayer('LessonWorksheet-@pageName','Worksheet-Lession Plan Header')">@(menu?.ContentItem?.Name)</a>
									<ul>
										@if (classes != null && classes.Any())
										{

											foreach (var className in classes)
											{
												try
												{
													var subjects = className?.DescendantsOrSelf()?
													.Where(x => x.ContentType.Alias == "worksheetCategory")?.OfType
													<WorksheetCategory>
														();

													<li>
														<a href="@(className?.Url())" onclick="commonLayer('LessonWorksheet-@pageName','Worksheet-By Class-@(className?.Name)')">@className.Title</a>

													</li>
												}
												catch (Exception ex)
												{
													HPPlc.Models.ApplicationError error = new HPPlc.Models.ApplicationError();
													error.PageName = "_TopTabsBonus.cshtml";
													error.MethodName = "Class";
													error.ErrorMessage = ex.Message;

													HPPlc.Models.dbAccessClass.PostApplicationError(error);
												}
											}

										}
									</ul>
								</li>
							}
							catch { }
						}
						else if (menu?.MyContentType != null && menu?.MyContentType?.ToLower() == "bonus")
						{
							//Bonus program
							try
							{
								var classes = root?.DescendantsOrSelf()?.Where(x => x.ContentType.Alias == "structureProgramRoot")?.FirstOrDefault()?.DescendantsOrSelf()?
										.Where(x => x.ContentType.Alias == "worksheetListingAgeWise")?.OfType<WorksheetListingAgeWise>();

								<li class="@menu.TitleClassName">
									@*<a href="@(menu?.ContentItem?.Url + "?" + menu?.ContentFestive + "#tab")">@menu.ContentItem.Name</a>*@
									<a href="@(Umbraco.Content(menu?.ContentItem?.Udi)?.DescendantsOrSelf()?.FirstOrDefault()?.Url())" onclick="commonLayer('BonusWorksheet-@pageName','Worksheet-Bonus Plan Header')">@(menu?.ContentItem?.Name)</a>
									<ul>

										@try
										{

											if (classes != null && classes.Any())
											{

												foreach (var className in classes)
												{
													try
													{
														var subjects = className?.DescendantsOrSelf()?.Where(x => x.ContentType.Alias == "worksheetCategory")?.OfType<WorksheetCategory>();

														<li>
															<a href="@(className?.Url())" onclick="commonLayer('BonusWorksheet-@pageName','Worksheet-By Class-@(className?.Name)')">@className.Title</a>
															@if (subjects != null && subjects.Any())
															{
																<ul>
																	@foreach (var subject in subjects)
																	{
																		if (subject?.CategoryName != null)
																		{
																			var topics = subject?.DescendantsOrSelf()?.Where(x => x.ContentType.Alias == "topicsName")?.OfType<TopicsName>();

																			var subjectName = Umbraco?.Content(subject?.CategoryName?.Udi)?.Value("subjectAlternateName");
																			<li>
																				<a href="@(subject?.Url())" onclick="commonLayer('BonusWorksheet-@pageName','Worksheet-By Class-@className.Name-@subjectName')">@subjectName</a>
																				@if (topics != null && topics.Any())
																				{
																					<ul>
																						@foreach (var topic in topics)
																						{
																							if (topic != null)
																							{
																								var topicName = Umbraco?.Content(topic?.TopicMapping?.Udi)?.Value("topicAlternateName");

																								<li><a href="@(topic?.Url())" onclick="commonLayer('BonusWorksheet-@pageName','BonusWorksheet-By Class-@className.Name-@subjectName-@topicName')">@topicName</a></li>
																							}
																						}
																					</ul>
																				}

																			</li>
																		}
																	}
																</ul>
															}
														</li>
													}
													catch (Exception ex)
													{
														HPPlc.Models.ApplicationError error = new HPPlc.Models.ApplicationError();
														error.PageName = "_TopTabs.cshtml";
														error.MethodName = "Class";
														error.ErrorMessage = ex.Message;

														HPPlc.Models.dbAccessClass.PostApplicationError(error);
													}
												}
												@*<li class="ms-no-results"><a href="@(culture + "/worksheets/")" onclick="commonLayer('Worksheet-@pageName','Worksheet-By Class-All Classes Worksheet')"><b>All Classes Worksheet</b></a></li>*@

											}

										}
										catch { }


									</ul>
								</li>
							}
							catch { }
						}
						else if (menu?.MyContentType != null && menu?.MyContentType?.ToLower() == "teachers")
						{
							//Bonus program
							try
							{
								var classes = root?.DescendantsOrSelf()?.Where(x => x.ContentType.Alias == "teacherRoot")?.FirstOrDefault()?.DescendantsOrSelf()?
										.Where(x => x.ContentType.Alias == "worksheetListingAgeWise")?.OfType<WorksheetListingAgeWise>();

								<li class="@menu.TitleClassName">
									
									<a href="@(Umbraco.Content(menu?.ContentItem?.Udi)?.DescendantsOrSelf()?.FirstOrDefault()?.Url())" onclick="commonLayer('TeachersWorksheet-@pageName','Worksheet-Teachers Plan Header')">@(menu?.ContentItem?.Name)</a>
									<ul>

										@try
										{

											if (classes != null && classes.Any())
											{

												foreach (var className in classes)
												{
													try
													{

														<li>
															<a href="@(className?.Url())" onclick="commonLayer('BonusWorksheet-@pageName','Worksheet-By Class-@(className?.Name)')">@className.Title</a>

														</li>
													}
													catch (Exception ex)
													{
														HPPlc.Models.ApplicationError error = new HPPlc.Models.ApplicationError();
														error.PageName = "_TopTabs.cshtml";
														error.MethodName = "Class";
														error.ErrorMessage = ex.Message;

														HPPlc.Models.dbAccessClass.PostApplicationError(error);
													}
												}

											}

										}
										catch { }

									</ul>
								</li>
							}
							catch { }
						}
						else if (menu.MyContentType != null && menu.MyContentType.ToLower() == "video" && UserLoggedInOrNot == true && (mySubscription != null && mySubscription.Any(x => int.Parse(x?.Ranking) > 1)))
						{
							try
							{
								var classes = root?.DescendantsOrSelf()?
										.Where(x => x.ContentType.Alias == "videoListingAgeWise").OfType<VideoListingAgeWise>();

								<li class="@menu.TitleClassName">
									@*<a href="@(menu?.ContentItem?.Url + "?" + menu?.ContentFestive + "#tab")">@menu.ContentItem.Name</a>*@
									<a href="javascript:void(0);">@menu.ContentItem.Name</a>
									<ul>
										@if (classes != null && classes.Any())
										{
											foreach (var className in classes)
											{
												<li>
													<a href="@className.Url()" onclick="commonLayer('Video-@pageName','Video-@className.Name')">@className.Title</a>
												</li>
											}
											<li class="ms-no-results"><a href="@(culture + "/videos/")" onclick="commonLayer('Video-@pageName','All Classes Videos')"><b>All Classes Videos</b></a></li>
										}
									</ul>
								</li>
							}
							catch { }
						}
						else if (menu.MyContentType != null && menu.MyContentType.ToLower() == "freedownload")
						{
							try
							{
								var freedownloads = root?.DescendantsOrSelf()?
										.Where(x => x.ContentType.Alias == "freeDownloadsTitle")?
										.OfType<FreeDownloadsTitle>()?.Where(x => x.IsActive == true && x?.Parent?.ContentType.Alias == "freeDownloads");

								<li class="@menu.TitleClassName">
									<a href="javascript:void(0);">@menu.ContentItem.Name</a>
									<ul>
										@if (freedownloads != null && freedownloads.Any())
										{
											foreach (var freedownload in freedownloads)
											{
												<li>
													<a href="@freedownload.Url()" onclick="commonLayer('Free Downloads-@pageName','Free Downloads for @freedownload.Name')">@freedownload.Name</a>
												</li>
											}
										}
									</ul>
								</li>
							}
							catch { }
						}
						else if (menu.MyContentType != null && menu?.SubMenu != null && String.IsNullOrWhiteSpace(menu?.MyContentType))
						{
							var submenus = menu?.SubMenu?.OfType<SubMenuItems>();
							<li>
								<a href="javascript:void(0)">@(menu?.ContentItem.Name)</a>
								<ul>
									@foreach (var subMenu in submenus)
									{
										<li><a href="@(subMenu?.SubMenuItem?.Url)" onclick="commonLayer('@pageName','@(subMenu?.SubMenuItem?.Name)')">@(subMenu?.SubMenuItem?.Name)</a></li>
									}
								</ul>
							</li>
						}
						else if (menu.MyContentType != null && menu.MyContentType.ToLower() == "festival")
						{
							@*<li><a class="@menu.TitleClassName" href="@(menu?.ContentItem?.Url)" onclick="commonLayer('Festival-@pageName','Festival-@(menu?.ContentItem?.Name)')">@(menu?.ContentItem?.Name)</a></li>*@


							//Special Offer program
							try
							{
								var classes = root?.DescendantsOrSelf()?.Where(x => x.ContentType.Alias == "offerRoot")?.FirstOrDefault()?.Children()?
										.Where(x => x.ContentType.Alias == "specialOffersRoot")?.FirstOrDefault()?.DescendantsOrSelf()?
										.Where(x => x.ContentType.Alias == "specialOfferAge")?.OfType<SpecialOfferAge>()?.ToList();

								<li class="@menu.TitleClassName">
									@*<a href="@(menu?.ContentItem?.Url + "?" + menu?.ContentFestive + "#tab")">@menu.ContentItem.Name</a>*@
									<a href="@(Umbraco.Content(menu?.ContentItem?.Udi)?.DescendantsOrSelf()?.FirstOrDefault()?.Url())" onclick="commonLayer('SpecialOfferWorksheet-@pageName','Worksheet-SpecialOffer Plan Header')">@(menu?.ContentItem?.Name)<div class="newIcnMenu"><img src="/common/images/new-icon.png" alt="" height="24" width="24"></div></a>

									
									@try
									{

										if (classes != null && classes.Any())
										{
											<ul>
												@foreach (var className in classes)
												{
													try
													{

														<li>
															<a href="@(className?.Url())" onclick="commonLayer('SpecialOfferWorksheet-@pageName','Worksheet-By Class-@(className?.Name)')">@className.Name</a>

														</li>
													}
													catch (Exception ex)
													{
														HPPlc.Models.ApplicationError error = new HPPlc.Models.ApplicationError();
														error.PageName = "_TopTabs.cshtml";
														error.MethodName = "Class";
														error.ErrorMessage = ex.Message;

														HPPlc.Models.dbAccessClass.PostApplicationError(error);
													}
												}
												@*<li class="ms-no-results"><a href="@(culture + "/worksheets/")" onclick="commonLayer('Worksheet-@pageName','Worksheet-By Class-All Classes Worksheet')"><b>All Classes Worksheet</b></a></li>*@
											</ul>
										}

									}
									catch { }
									
								</li>
							}
							catch { }
						}
						@*else
							{
								<li class="@menu.TitleClassName"><a href="@(menu?.ContentItem?.Url + "#tab")" class="dvWorkSheet" onclick="commonLayer('@pageName','@(menu.ContentItem?.Name)')">@(menu.ContentItem?.Name)</a></li>
							}*@
					}
				}
			}
			catch (Exception ex)
			{
				HPPlc.Models.ApplicationError error = new HPPlc.Models.ApplicationError();
				error.PageName = "_TopTabs.cshtml";
				error.MethodName = "OnLoad";
				error.ErrorMessage = ex.Message;

				HPPlc.Models.dbAccessClass.PostApplicationError(error);
			}
		</ul>


		<div class="mobilelInks">
			<div class="mobilelInksin">
				<ul class="">
					<li class="noDD"><a href="@(culture + "/subscription")" onclick="commonLayer('@pageName','Packages')">Packages</a></li>
					<li class="noDD"><a href="@(culture + "/about-us")" onclick="commonLayer('@pageName','About Us')">About Us</a></li>
					<li class="noDD"><a href="@(culture + "/faqs")" onclick="commonLayer('@pageName','Help Center')">Help Center</a></li>

					<li class="noDD"><a href="https://www8.hp.com/in/en/privacy/privacy.html?jumpid=in_R11928_/in/en/corp/privacy-central/privacy-statements" target="_blank" onclick="commonLayer('@pageName','Help Center')">Privacy Statement</a></li>
					<li class="noDD"><a href="https://d1o0e2ejzaj3cn.cloudfront.net/media/nv4bjv54/terms-of-service-plc-2-0_legal-team-comments_23-sept.pdf" target="_blank" onclick="commonLayer('@pageName','Help Center')">Terms of Use</a></li>
				</ul>
			</div>
		</div>
	</div>
</div>
